<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RealtimeMD — Real-time Markdown Editor</title>

  <!-- SEO Meta Tags -->
  <meta name="description"
    content="RealtimeMD is a free, browser-based real-time Markdown editor with live preview, virtual file management, image support, and session persistence. No backend required.">
  <meta name="robots" content="index, follow">
  <meta name="keywords" content="markdown, editor, real-time, preview, browser, online, free">
  <meta name="author" content="RealtimeMD">
  <link rel="canonical" href="">
  <script>
    // Best-effort canonical URL for static hosting
    document.querySelector('link[rel="canonical"]').href = location.href.split('?')[0].split('#')[0];
  </script>

  <!-- Open Graph -->
  <meta property="og:title" content="RealtimeMD — Real-time Markdown Editor">
  <meta property="og:description"
    content="Free browser-based Markdown editor with live preview, file management, image support, and session persistence.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="RealtimeMD — Real-time Markdown Editor">
  <meta name="twitter:description"
    content="Free browser-based Markdown editor with live preview, file management, and image support.">

  <meta name="theme-color" content="#1e1e2e">

  <!-- Restore theme before render to prevent flash -->
  <script>
    (function () {
      var t = localStorage.getItem('realtimemd-theme');
      if (t === 'light' || t === 'dark') {
        document.documentElement.setAttribute('data-theme', t);
      }
    })();
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div id="app">

    <!-- Extension Slot: Header -->
    <div id="ext-slot-header" class="extension-slot"></div>

    <!-- Toolbar -->
    <div class="toolbar">
      <!-- Mobile menu toggle -->
      <button id="btn-mobile-menu" class="toolbar-btn mobile-menu-btn" data-i18n-tooltip="tooltip.menu"
        data-i18n-aria="tooltip.menu" data-tooltip="Menu" aria-label="Menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6" />
          <line x1="3" y1="12" x2="21" y2="12" />
          <line x1="3" y1="18" x2="21" y2="18" />
        </svg>
      </button>

      <div class="toolbar-group">
        <button id="btn-undo" class="toolbar-btn" data-i18n-tooltip="tooltip.undo" data-i18n-aria="tooltip.undo"
          data-tooltip="Undo (Ctrl+Z)" aria-label="Undo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="1 4 1 10 7 10" />
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
          </svg>
        </button>
        <button id="btn-redo" class="toolbar-btn" data-i18n-tooltip="tooltip.redo" data-i18n-aria="tooltip.redo"
          data-tooltip="Redo (Ctrl+Y)" aria-label="Redo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 4 23 10 17 10" />
            <path d="M20.49 15a9 9 0 1 1-2.13-9.36L23 10" />
          </svg>
        </button>
      </div>

      <div class="toolbar-separator"></div>

      <div class="toolbar-group">
        <button id="btn-heading" class="toolbar-btn" data-i18n-tooltip="tooltip.heading"
          data-i18n-aria="tooltip.heading" data-tooltip="Heading" aria-label="Heading">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 4v16" />
            <path d="M18 4v16" />
            <path d="M6 12h12" />
          </svg>
        </button>
        <button id="btn-bold" class="toolbar-btn" data-i18n-tooltip="tooltip.bold" data-i18n-aria="tooltip.bold"
          data-tooltip="Bold (Ctrl+B)" aria-label="Bold">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z" />
            <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z" />
          </svg>
        </button>
        <button id="btn-italic" class="toolbar-btn" data-i18n-tooltip="tooltip.italic" data-i18n-aria="tooltip.italic"
          data-tooltip="Italic (Ctrl+I)" aria-label="Italic">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="19" y1="4" x2="10" y2="4" />
            <line x1="14" y1="20" x2="5" y2="20" />
            <line x1="15" y1="4" x2="9" y2="20" />
          </svg>
        </button>
        <button id="btn-strikethrough" class="toolbar-btn" data-i18n-tooltip="tooltip.strikethrough"
          data-i18n-aria="tooltip.strikethrough" data-tooltip="Strikethrough" aria-label="Strikethrough">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 4H9a3 3 0 0 0-3 3v1a3 3 0 0 0 3 3h6a3 3 0 0 1 3 3v1a3 3 0 0 1-3 3H8" />
            <line x1="4" y1="12" x2="20" y2="12" />
          </svg>
        </button>
      </div>

      <div class="toolbar-separator desktop-only"></div>

      <div class="toolbar-group desktop-only">
        <button id="btn-code" class="toolbar-btn" data-i18n-tooltip="tooltip.inlineCode"
          data-i18n-aria="tooltip.inlineCode" data-tooltip="Inline Code" aria-label="Inline Code">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="16 18 22 12 16 6" />
            <polyline points="8 6 2 12 8 18" />
          </svg>
        </button>
        <button id="btn-codeblock" class="toolbar-btn" data-i18n-tooltip="tooltip.codeBlock"
          data-i18n-aria="tooltip.codeBlock" data-tooltip="Code Block" aria-label="Code Block">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" />
            <polyline points="9 8 5 12 9 16" />
            <polyline points="15 8 19 12 15 16" />
          </svg>
        </button>
        <button id="btn-link" class="toolbar-btn" data-i18n-tooltip="tooltip.link" data-i18n-aria="tooltip.link"
          data-tooltip="Link (Ctrl+K)" aria-label="Link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
          </svg>
        </button>
        <button id="btn-image" class="toolbar-btn" data-i18n-tooltip="tooltip.image" data-i18n-aria="tooltip.image"
          data-tooltip="Image" aria-label="Image">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <circle cx="8.5" cy="8.5" r="1.5" />
            <polyline points="21 15 16 10 5 21" />
          </svg>
        </button>
      </div>

      <div class="toolbar-separator desktop-only"></div>

      <div class="toolbar-group desktop-only">
        <button id="btn-ul" class="toolbar-btn" data-i18n-tooltip="tooltip.ul" data-i18n-aria="tooltip.ul"
          data-tooltip="Bullet List" aria-label="Bullet List">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="8" y1="6" x2="21" y2="6" />
            <line x1="8" y1="12" x2="21" y2="12" />
            <line x1="8" y1="18" x2="21" y2="18" />
            <circle cx="4" cy="6" r="1" fill="currentColor" />
            <circle cx="4" cy="12" r="1" fill="currentColor" />
            <circle cx="4" cy="18" r="1" fill="currentColor" />
          </svg>
        </button>
        <button id="btn-ol" class="toolbar-btn" data-i18n-tooltip="tooltip.ol" data-i18n-aria="tooltip.ol"
          data-tooltip="Numbered List" aria-label="Numbered List">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="10" y1="6" x2="21" y2="6" />
            <line x1="10" y1="12" x2="21" y2="12" />
            <line x1="10" y1="18" x2="21" y2="18" /><text x="2" y="8" font-size="8" fill="currentColor"
              font-family="sans-serif">1</text><text x="2" y="14" font-size="8" fill="currentColor"
              font-family="sans-serif">2</text><text x="2" y="20" font-size="8" fill="currentColor"
              font-family="sans-serif">3</text>
          </svg>
        </button>
        <button id="btn-checklist" class="toolbar-btn" data-i18n-tooltip="tooltip.checklist"
          data-i18n-aria="tooltip.checklist" data-tooltip="Checklist" aria-label="Checklist">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="5" width="6" height="6" rx="1" />
            <polyline points="4.5 8 6 9.5 8 6.5" />
            <line x1="12" y1="8" x2="21" y2="8" />
            <rect x="3" y="14" width="6" height="6" rx="1" />
            <line x1="12" y1="17" x2="21" y2="17" />
          </svg>
        </button>
        <button id="btn-quote" class="toolbar-btn" data-i18n-tooltip="tooltip.quote" data-i18n-aria="tooltip.quote"
          data-tooltip="Blockquote" aria-label="Blockquote">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 21c3 0 7-1 7-8V5c0-1.25-.76-2.17-2-2H5c-1.25 0-2 .75-2 2v4c0 1.25.75 2 2 2h2c0 4-3 6-6 6z" />
            <path d="M15 21c3 0 7-1 7-8V5c0-1.25-.76-2.17-2-2h-3c-1.25 0-2 .75-2 2v4c0 1.25.75 2 2 2h2c0 4-3 6-6 6z" />
          </svg>
        </button>
        <button id="btn-hr" class="toolbar-btn" data-i18n-tooltip="tooltip.hr" data-i18n-aria="tooltip.hr"
          data-tooltip="Horizontal Rule" aria-label="Horizontal Rule">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="2" y1="12" x2="22" y2="12" />
          </svg>
        </button>
        <button id="btn-table" class="toolbar-btn" data-i18n-tooltip="tooltip.table" data-i18n-aria="tooltip.table"
          data-tooltip="Table" aria-label="Table">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" />
            <line x1="3" y1="9" x2="21" y2="9" />
            <line x1="3" y1="15" x2="21" y2="15" />
            <line x1="9" y1="3" x2="9" y2="21" />
            <line x1="15" y1="3" x2="15" y2="21" />
          </svg>
        </button>
      </div>

      <div class="toolbar-spacer"></div>

      <div class="toolbar-group">
        <button id="btn-save" class="toolbar-btn" data-i18n-tooltip="tooltip.save" data-i18n-aria="tooltip.save"
          data-tooltip="Save (Ctrl+S)" aria-label="Save">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
            <polyline points="17 21 17 13 7 13 7 21" />
            <polyline points="7 3 7 8 15 8" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">

      <!-- Ribbon (Activity Bar) -->
      <div class="ribbon">
        <button id="ribbon-explorer" class="ribbon-btn" data-i18n-title="ribbon.explorer"
          data-i18n-aria="ribbon.explorer" title="File Explorer" aria-label="File Explorer">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
            <polyline points="14 2 14 8 20 8" />
          </svg>
        </button>

        <div class="ribbon-bottom">
          <button id="ribbon-import" class="ribbon-btn" data-i18n-title="ribbon.import" data-i18n-aria="ribbon.import"
            title="Import Workspace" aria-label="Import Workspace">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="7 10 12 15 17 10" />
              <line x1="12" y1="15" x2="12" y2="3" />
            </svg>
          </button>
          <button id="ribbon-export" class="ribbon-btn" data-i18n-title="ribbon.export" data-i18n-aria="ribbon.export"
            title="Export Workspace" aria-label="Export Workspace">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="17 8 12 3 7 8" />
              <line x1="12" y1="3" x2="12" y2="15" />
            </svg>
          </button>
          <button id="ribbon-export-zip" class="ribbon-btn" data-i18n-title="ribbon.exportZip"
            data-i18n-aria="ribbon.exportZip" title="Export as ZIP" aria-label="Export as ZIP">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 19V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z" />
              <polyline points="9 12 12 15 15 12" />
              <line x1="12" y1="8" x2="12" y2="15" />
            </svg>
          </button>
          <button id="ribbon-pdf" class="ribbon-btn" data-i18n-title="ribbon.pdf" data-i18n-aria="ribbon.pdf"
            title="Save Preview as PDF" aria-label="Save Preview as PDF">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
              <polyline points="14 2 14 8 20 8" />
              <line x1="9" y1="15" x2="15" y2="15" />
            </svg>
          </button>
          <button id="ribbon-theme" class="ribbon-btn" data-i18n-title="ribbon.theme" data-i18n-aria="ribbon.theme"
            title="Toggle Theme" aria-label="Toggle Theme">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5" />
              <line x1="12" y1="1" x2="12" y2="3" />
              <line x1="12" y1="21" x2="12" y2="23" />
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
              <line x1="1" y1="12" x2="3" y2="12" />
              <line x1="21" y1="12" x2="23" y2="12" />
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
            </svg>
          </button>
          <button id="ribbon-reset" class="ribbon-btn" data-i18n-title="ribbon.reset" data-i18n-aria="ribbon.reset"
            title="Reset Session" aria-label="Reset Session">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="1 4 1 10 7 10" />
              <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
              <line x1="12" y1="8" x2="12" y2="12" />
              <line x1="12" y1="16" x2="12.01" y2="16" />
            </svg>
          </button>
          <button id="ribbon-gigareset" class="ribbon-btn" data-i18n-title="ribbon.gigareset"
            data-i18n-aria="ribbon.gigareset" title="GigaReset" aria-label="GigaReset">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" />
              <line x1="15" y1="9" x2="9" y2="15" />
              <line x1="9" y1="9" x2="15" y2="15" />
            </svg>
          </button>
          <button id="ribbon-help" class="ribbon-btn" data-i18n-title="ribbon.help" data-i18n-aria="ribbon.help"
            title="Help" aria-label="Help">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
              <line x1="12" y1="17" x2="12.01" y2="17" />
            </svg>
          </button>
          <!-- Language Selector -->
          <select id="ribbon-lang" class="ribbon-lang-select" data-i18n-title="ribbon.language" title="Language"
            aria-label="Language">
            <option value="en">EN</option>
            <option value="ja">JA</option>
            <option value="zh">ZH</option>
            <option value="hi">HI</option>
            <option value="es">ES</option>
            <option value="id">ID</option>
            <option value="pt">PT</option>
            <option value="fr">FR</option>
            <option value="vi">VI</option>
          </select>
        </div>
      </div>

      <!-- Sidebar (File Explorer) -->
      <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <span data-i18n="sidebar.explorer">EXPLORER</span>
          <div class="sidebar-header-actions">
            <button id="btn-new-file" data-i18n-title="sidebar.newFile" data-i18n-aria="sidebar.newFile"
              title="New File" aria-label="New File">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14 2 14 8 20 8" />
                <line x1="12" y1="18" x2="12" y2="12" />
                <line x1="9" y1="15" x2="15" y2="15" />
              </svg>
            </button>
            <button id="btn-new-folder" data-i18n-title="sidebar.newFolder" data-i18n-aria="sidebar.newFolder"
              title="New Folder" aria-label="New Folder">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                <line x1="12" y1="11" x2="12" y2="17" />
                <line x1="9" y1="14" x2="15" y2="14" />
              </svg>
            </button>
            <button id="btn-upload-file" data-i18n-title="sidebar.upload" data-i18n-aria="sidebar.upload"
              title="Upload File" aria-label="Upload File">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
            </button>
            <button id="btn-collapse-all" data-i18n-title="sidebar.collapseAll" data-i18n-aria="sidebar.collapseAll"
              title="Collapse All" aria-label="Collapse All">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="4 14 10 14 10 20" />
                <polyline points="20 10 14 10 14 4" />
                <line x1="14" y1="10" x2="21" y2="3" />
                <line x1="3" y1="21" x2="10" y2="14" />
              </svg>
            </button>
          </div>
        </div>
        <div class="sidebar-content">
          <div id="file-tree" class="file-tree"></div>
        </div>
        <!-- Extension Slot: Sidebar -->
        <div id="ext-slot-sidebar" class="extension-slot"></div>
      </div>

      <!-- Sidebar backdrop (mobile) -->
      <div id="sidebar-backdrop" class="sidebar-backdrop"></div>

      <!-- Workspace (Editor + Preview) -->
      <div class="workspace">
        <div class="editor-preview-container">

          <!-- Editor Pane -->
          <div class="editor-pane">
            <div class="pane-header">
              <span data-i18n="pane.editor">EDITOR</span>
              <span id="editor-file-name" class="file-name">untitled.md</span>
              <span id="editor-unsaved-dot" class="unsaved-dot"></span>
            </div>
            <!-- Find/Replace Bar -->
            <div id="find-replace-bar" class="find-replace-bar" hidden>
              <div class="fr-row">
                <input id="fr-find" class="fr-input" type="text" placeholder="Find" spellcheck="false" />
                <span id="fr-count" class="fr-count"></span>
                <button id="fr-prev" class="fr-btn" title="Previous (Shift+Enter)">&#9650;</button>
                <button id="fr-next" class="fr-btn" title="Next (Enter)">&#9660;</button>
                <div class="fr-toggles">
                  <label class="fr-toggle" title="Match Case"><input id="fr-case"
                      type="checkbox" /><span>Aa</span></label>
                  <label class="fr-toggle" title="Whole Word"><input id="fr-word"
                      type="checkbox" /><span>W</span></label>
                  <label class="fr-toggle" title="Regex"><input id="fr-regex" type="checkbox" /><span>.*</span></label>
                </div>
                <button id="fr-close" class="fr-btn fr-close-btn" title="Close (Esc)">&#10005;</button>
              </div>
              <div id="fr-replace-row" class="fr-row" hidden>
                <input id="fr-replace" class="fr-input" type="text" placeholder="Replace" spellcheck="false" />
                <button id="fr-replace-btn" class="fr-btn fr-action-btn">Replace</button>
                <button id="fr-replace-all" class="fr-btn fr-action-btn">All</button>
              </div>
            </div>
            <div class="editor-wrapper">
              <div id="line-numbers" class="line-numbers" aria-hidden="true">
                <span class="line-num">1</span>
              </div>
              <textarea id="editor-textarea" class="editor-textarea" data-i18n-placeholder="editor.placeholder"
                placeholder="Type Markdown..." spellcheck="false" autocapitalize="off" autocomplete="off"
                autocorrect="off" data-i18n-aria="pane.editor" aria-label="Markdown Editor"></textarea>
            </div>
          </div>

          <!-- Resize Handle -->
          <div id="resize-handle" class="resize-handle desktop-only"></div>

          <!-- Preview Pane -->
          <div class="preview-pane">
            <div class="pane-header">
              <span data-i18n="pane.preview">PREVIEW</span>
            </div>
            <div id="preview-wrapper" class="preview-wrapper">
              <div id="preview-content" class="preview-content"></div>
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Status Bar -->
    <div class="statusbar">
      <span id="status-position" class="statusbar-item">Ln 1, Col 1</span>
      <span id="status-count" class="statusbar-item">0 words, 0 chars</span>
      <div class="statusbar-spacer"></div>
      <span class="statusbar-item" data-i18n="status.encoding">UTF-8</span>
      <span class="statusbar-item" data-i18n="status.language">Markdown</span>
    </div>

    <!-- Drop Zone Overlay -->
    <div id="drop-zone-overlay" class="drop-zone-overlay" data-i18n="dropzone.text">
      Drop files to upload
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu">
      <div id="ctx-new-file" class="context-menu-item" data-i18n="ctx.newFile">New File</div>
      <div id="ctx-new-folder" class="context-menu-item" data-i18n="ctx.newFolder">New Folder</div>
      <div class="context-menu-separator"></div>
      <div id="ctx-rename" class="context-menu-item" data-i18n="ctx.rename">Rename</div>
      <div id="ctx-duplicate" class="context-menu-item" data-i18n="ctx.duplicate">Duplicate</div>
      <div id="ctx-copy-path" class="context-menu-item" data-i18n="ctx.copyPath">Copy Path</div>
      <div id="ctx-copy-relative-path" class="context-menu-item" data-i18n="ctx.copyRelativePath">Copy Relative Path
      </div>
      <div id="ctx-copy-md-image" class="context-menu-item" data-i18n="ctx.copyMdImage">Copy as Markdown Image</div>
      <div class="context-menu-separator"></div>
      <div id="ctx-download" class="context-menu-item" data-i18n="ctx.download">Download</div>
      <div class="context-menu-separator"></div>
      <div id="ctx-delete" class="context-menu-item danger" data-i18n="ctx.delete">Delete</div>
    </div>

    <!-- Extension Slot: Footer -->
    <div id="ext-slot-footer" class="extension-slot"></div>

    <!-- Mobile Action Bar (visible only on mobile via CSS) -->
    <div id="mobile-action-bar" class="mobile-action-bar">
      <button id="mob-theme" class="mob-action-btn" data-i18n-aria="ribbon.theme" aria-label="Toggle Theme">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
        </svg>
        <span data-i18n="mobile.theme">Theme</span>
      </button>
      <button id="mob-pdf" class="mob-action-btn" data-i18n-aria="ribbon.pdf" aria-label="Save Preview as PDF">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
          <polyline points="14 2 14 8 20 8" />
          <line x1="9" y1="15" x2="15" y2="15" />
        </svg>
        <span data-i18n="mobile.pdf">PDF</span>
      </button>
      <button id="mob-zip" class="mob-action-btn" data-i18n-aria="ribbon.exportZip" aria-label="Export as ZIP">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <path d="M21 19V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z" />
          <polyline points="9 12 12 15 15 12" />
          <line x1="12" y1="8" x2="12" y2="15" />
        </svg>
        <span data-i18n="mobile.zip">ZIP</span>
      </button>
      <button id="mob-reset" class="mob-action-btn" data-i18n-aria="ribbon.reset" aria-label="Reset Session">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <polyline points="1 4 1 10 7 10" />
          <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
        </svg>
        <span data-i18n="mobile.reset">Reset</span>
      </button>
      <button id="mob-gigareset" class="mob-action-btn" data-i18n-aria="ribbon.gigareset" aria-label="GigaReset">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" />
          <line x1="15" y1="9" x2="9" y2="15" />
          <line x1="9" y1="9" x2="15" y2="15" />
        </svg>
        <span data-i18n="mobile.gigareset">GigaReset</span>
      </button>
      <button id="mob-help" class="mob-action-btn" data-i18n-aria="ribbon.help" aria-label="Help">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
          <circle cx="12" cy="12" r="10" />
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
          <line x1="12" y1="17" x2="12.01" y2="17" />
        </svg>
        <span data-i18n="mobile.help">Help</span>
      </button>
      <select id="mob-lang" class="mob-lang-select" aria-label="Language">
        <option value="en">EN</option>
        <option value="ja">JA</option>
        <option value="zh">ZH</option>
        <option value="hi">HI</option>
        <option value="es">ES</option>
        <option value="id">ID</option>
        <option value="pt">PT</option>
        <option value="fr">FR</option>
        <option value="vi">VI</option>
      </select>
    </div>

    <!-- Reset Confirmation Dialog -->
    <div id="reset-dialog-overlay" class="dialog-overlay">
      <div class="dialog-box">
        <h3 data-i18n="dialog.resetTitle">Reset session?</h3>
        <p data-i18n="dialog.resetMessage">This will clear your current session data (open files, workspace state,
          preferences for this session). This cannot be undone. Continue?</p>
        <div class="dialog-actions">
          <button id="reset-cancel" class="dialog-btn dialog-btn-cancel" data-i18n="dialog.cancel">Cancel</button>
          <button id="reset-confirm" class="dialog-btn dialog-btn-danger" data-i18n="dialog.reset">Reset</button>
        </div>
      </div>
    </div>

    <!-- GigaReset Confirmation Dialog -->
    <div id="gigareset-dialog-overlay" class="dialog-overlay">
      <div class="dialog-box">
        <h3 data-i18n="dialog.gigaresetTitle">GigaReset?</h3>
        <p data-i18n="dialog.gigaresetMessage">This will erase all local data for this app (files, session state,
          caches, storage). This cannot be undone. Continue?</p>
        <div class="dialog-actions">
          <button id="gigareset-cancel" class="dialog-btn dialog-btn-cancel" data-i18n="dialog.cancel">Cancel</button>
          <button id="gigareset-confirm" class="dialog-btn dialog-btn-danger" data-i18n="dialog.gigaresetConfirm">Erase
            &amp; Reload</button>
        </div>
      </div>
    </div>

    <!-- Help Panel Modal -->
    <div id="help-overlay" class="dialog-overlay">
      <div class="help-panel">
        <div class="help-header">
          <h3 data-i18n="help.title">Help</h3>
          <button id="help-close" class="help-close-btn" aria-label="Close">&times;</button>
        </div>
        <div class="help-body" id="help-body">
          <!-- Content injected by JS via i18n -->
        </div>
      </div>
    </div>

  </div>

  <!-- DOMPurify (HTML sanitization) -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3/dist/purify.min.js" defer></script>

  <!-- MathJax (parser outputs \( \) and \[ \] — user writes $ and $$) -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [['\\[', '\\]']]
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      startup: {
        typeset: false
      }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>

  <!-- Mermaid (diagram rendering) -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js" defer></script>
  <script>
    // Initialize mermaid after script loads (defer means it loads after DOM but we use load event)
    window.addEventListener('load', function () {
      if (typeof mermaid !== 'undefined') {
        mermaid.initialize({
          startOnLoad: false,
          theme: document.documentElement.getAttribute('data-theme') === 'light' ? 'default' : 'dark',
          securityLevel: 'strict'
        });
      }
    });
  </script>

  <!-- JSZip for workspace ZIP export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" defer></script>


  <script type="module" src="js/app.js"></script>
</body>

</html>